(function(){"use strict";var t={336:function(t,e,n){var i=n(963),l=n(252);const a={class:"navbar is-link"},o=(0,l.uE)('<div class="navbar-brand"><span class="navbar-item"><i class="fas fa-home"></i></span><span class="navbar-item"><span class="fa fa-language">加賀管理画面</span></span></div>',1),u={class:"navbar-end"},s={class:"navbar-item"},m={href:"/admin/logout",class:"logout-icon"},r=(0,l.Wm)("span",{class:"fa fa-language"},"ログアウト",-1);function p(t,e,n,i,p,c){const d=(0,l.up)("ion-icon"),v=(0,l.up)("router-view");return(0,l.wg)(),(0,l.j4)("div",null,[(0,l.Wm)("header",a,[o,(0,l.Wm)("div",u,[(0,l.Wm)("div",s,[(0,l.Wm)("a",m,[(0,l.Wm)(d,{size:"large",name:"person-circle-outline"}),r])])])]),(0,l.Wm)(v)])}var c=n(262);function d(){const t=t=>`http://localhost/admin/api${t}`,e=(0,c.qj)({items:[],links:[]}),n=(0,c.qj)({name:"",email:"",status:"",item_type:"",order:"DESC"}),i=(0,c.iH)(1),l=async function(i){try{let l=t(`/item/list?page=${i}`);n.name&&(l+=`&name=${n.name}`),n.email&&(l+=`&email=${n.email}`),n.status&&(l+=`&status=${n.status}`),n.item_type&&(l+=`&item_type=${n.item_type}`),n.order&&(l+=`&order=${n.order}`);const a=await fetch(l);if(!a.ok)throw new Error("通信エラー");const o=await a.json();e.items=o.data,e.links=o.links}catch(l){alert("通信エラー\n再度ページを読み込み直してください。")}},a=async function(e){const n={};try{const i=await fetch(t(`/item/${e}`));if(!i.ok)throw new Error("通信エラー");const l=await i.json();n.customer=l.customer,n.item=l.item,n.images=l.images}catch(i){alert("通信エラー\n再度ページを読み込み直してください。")}return n},o=async function(e,n){try{const i={status:n},l=await fetch(t(`/item/status/${e}`),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!l.ok)throw new Error("通信エラー")}catch(i){alert("通信エラー\n再度ページを読み込み直してください。")}},u=async function(e){try{const n=await fetch(t(`/item/${e.customer.id}`),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)throw new Error("通信エラー")}catch(n){alert("通信エラー\n再度ページを読み込み直してください。")}};return l(1),{state:e,page:i,serch:n,getItems:l,updateStatus:o,getItem:a,updateInput:u}}var v={name:"App",setup(){(0,l.JJ)("itemStore",d())}};v.render=p;var W=v,h=n(119),y=n(577);const f={class:"box"},g=(0,l.Wm)("h2",null,"絞り込み条件",-1),w={class:"table"},b=(0,l.Wm)("th",null,"名前検索",-1),k=(0,l.Wm)("th",null,"メールアドレス",-1),_=(0,l.Wm)("th",null,"ステータス",-1),j=(0,l.uE)('<option value="">全て</option><option value="1">査定依頼中</option><option value="2">概算査定済み</option><option value="3">品物受け取り中</option><option value="4">正規査定中</option><option value="5">完了済み</option>',6),C=(0,l.Wm)("th",null,"種別",-1),x=(0,l.uE)('<option value="">全て</option><option value="不明">不明</option><option value="刀装具">刀装具</option><option value="文具">文具</option><option value="ミリタリー">ミリタリー</option><option value="ガラス">ガラス</option><option value="家具">家具</option>',7),V=(0,l.Wm)("th",null,"並び順",-1),U=(0,l.Wm)("option",{value:"DESC"},"新しい順",-1),O=(0,l.Wm)("option",{value:"ASC"},"古い順",-1),S={key:0,class:"table is-bordered is-fullwidth"},E=(0,l.Wm)("thead",null,[(0,l.Wm)("tr",null,[(0,l.Wm)("th",null,"ID"),(0,l.Wm)("th",null,"お客様名"),(0,l.Wm)("th",null,"メールアドレス"),(0,l.Wm)("th",null,"商品種別"),(0,l.Wm)("th",null,"商品名"),(0,l.Wm)("th",null,"希望価格"),(0,l.Wm)("th",null,"ステータス")])],-1),I=(0,l.Wm)("tfoot",null,[(0,l.Wm)("tr",null,[(0,l.Wm)("th",null,"ID"),(0,l.Wm)("th",null,"お客様名"),(0,l.Wm)("th",null,"メールアドレス"),(0,l.Wm)("th",null,"商品種別"),(0,l.Wm)("th",null,"商品名"),(0,l.Wm)("th",null,"希望価格"),(0,l.Wm)("th",null,"状況")])],-1),$={class:"select"},z=(0,l.uE)('<option value="1">査定依頼中</option><option value="2">概算査定済み</option><option value="3">品物受け取り中</option><option value="4">正規査定中</option><option value="5">完了済み</option>',5),H={key:1},L={class:"page"};function M(t,e,n,a,o,u){return(0,l.wg)(),(0,l.j4)("div",null,[(0,l.Wm)("div",f,[g,(0,l.Wm)("table",w,[(0,l.Wm)("tr",null,[b,(0,l.Wm)("td",null,[(0,l.wy)((0,l.Wm)("input",{class:"",type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>a.serch.name=t)},null,512),[[i.nr,a.serch.name]])])]),(0,l.Wm)("tr",null,[k,(0,l.Wm)("td",null,[(0,l.wy)((0,l.Wm)("input",{class:"",type:"email","onUpdate:modelValue":e[2]||(e[2]=t=>a.serch.email=t)},null,512),[[i.nr,a.serch.email]])])]),(0,l.Wm)("tr",null,[_,(0,l.Wm)("td",null,[(0,l.wy)((0,l.Wm)("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>a.serch.status=t)},[j],512),[[i.bM,a.serch.status]])])]),(0,l.Wm)("tr",null,[C,(0,l.Wm)("td",null,[(0,l.wy)((0,l.Wm)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>a.serch.item_type=t)},[x],512),[[i.bM,a.serch.item_type]])])]),(0,l.Wm)("tr",null,[V,(0,l.Wm)("td",null,[(0,l.wy)((0,l.Wm)("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>a.serch.order=t)},[U,O],512),[[i.bM,a.serch.order]])])])]),(0,l.Wm)("button",{onClick:e[6]||(e[6]=(...t)=>a.serchRun&&a.serchRun(...t))},"検索")]),a.items.length>0?((0,l.wg)(),(0,l.j4)("table",S,[E,I,(0,l.Wm)("tbody",null,[((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(a.items,((t,e)=>((0,l.wg)(),(0,l.j4)("tr",{class:"link-list",key:e},[(0,l.Wm)("th",{onClick:e=>a.detailLink(t.id)},(0,y.zw)(t.id),9,["onClick"]),(0,l.Wm)("td",{onClick:e=>a.detailLink(t.id)},(0,y.zw)(t.name),9,["onClick"]),(0,l.Wm)("td",{onClick:e=>a.detailLink(t.id)},(0,y.zw)(t.email),9,["onClick"]),(0,l.Wm)("td",{onClick:e=>a.detailLink(t.id)},(0,y.zw)(t.item_type),9,["onClick"]),(0,l.Wm)("td",{onClick:e=>a.detailLink(t.id)},(0,y.zw)(t.item_name),9,["onClick"]),(0,l.Wm)("td",{onClick:e=>a.detailLink(t.id)},(0,y.zw)(t.item_price),9,["onClick"]),(0,l.Wm)("td",null,[(0,l.Wm)("div",$,[(0,l.wy)((0,l.Wm)("select",{"onUpdate:modelValue":e=>t.status=e,onChange:e=>a.changeStatus(t.item_id,t.status)},[z],40,["onUpdate:modelValue","onChange"]),[[i.bM,t.status]])])])])))),128))])])):((0,l.wg)(),(0,l.j4)("div",H," 該当データがありません。 ")),(0,l.Wm)("ul",L,[((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(a.links,((t,e)=>((0,l.wg)(),(0,l.j4)("li",{onClick:e=>a.getPage(t.label),key:e,class:a.getClassName(t.active)},(0,y.zw)(t.label),11,["onClick"])))),128))])])}var T={name:"AdminTop",setup(){const{state:t,getItems:e,updateStatus:n,page:i,serch:a}=(0,l.f3)("itemStore"),o=(0,h.tv)(),u=(0,c.Vh)(t,"items"),s=(0,c.Vh)(t,"links"),m=(0,c.qj)({name:""}),r=t=>{i.value=t,e(t)},p=t=>t?"on-active":"non-active",d=(t,e)=>{confirm(`${t}の状態を更新しますか？`)&&n(t,e,i.value)},v=t=>{o.push(`/detail/${t}`)},W=()=>{e(1)};return{items:u,links:s,page:i,serch:a,input:m,getClassName:p,getPage:r,changeStatus:d,detailLink:v,serchRun:W}}};T.render=M;var q=T;const D={class:"box"},P=(0,l.Wm)("p",null,"名前：",-1),J={class:"box"},N=(0,l.Wm)("p",null,"メールアドレス：",-1),A={class:"box"},K=(0,l.Wm)("p",null,"都道府県",-1),R={class:"box"},Y=(0,l.Wm)("p",null,"住所",-1),F={class:"box"},B=(0,l.Wm)("p",null,"品物名",-1),G={class:"box"},Q=(0,l.Wm)("p",null,"品目種別",-1),X=(0,l.uE)('<option value="" selected="selected">品目種別を選択してください</option><option value="不明">不明</option><option value="刀装具">刀装具</option><option value="文具">文具</option><option value="ミリタリー">ミリタリー</option><option value="ガラス">ガラス</option><option value="家具">家具</option>',7),Z={class:"box"},tt=(0,l.Wm)("p",null,"希望価格",-1),et={class:"box"},nt=(0,l.Wm)("p",null,"ステータス",-1),it=(0,l.uE)('<option value="1">査定依頼中</option><option value="2">概算査定済み</option><option value="3">品物受け取り中</option><option value="4">正規査定中</option><option value="5">完了済み</option>',5),lt={class:"box"},at=(0,l.Wm)("p",null,"詳細",-1),ot={class:"box"},ut=(0,l.Wm)("p",null,"ご要望・コメント",-1),st={class:"box"},mt=(0,l.Wm)("p",null,"品物画像",-1),rt={class:"card-box"},pt=(0,l.Wm)("button",{type:"submit",class:"button is-primary is-rounded"},"更新",-1);function ct(t,e,n,a,o,u){return(0,l.wg)(),(0,l.j4)("div",null,[(0,l.Wm)("form",{onSubmit:e[12]||(e[12]=(0,i.iM)(((...t)=>a.sendInput&&a.sendInput(...t)),["prevent"]))},[(0,l.Wm)("h1",null,"ID:"+(0,y.zw)(a.input.customer.id)+" 商品詳細",1),(0,l.Wm)("div",D,[P,(0,l.wy)((0,l.Wm)("input",{class:"input is-large",type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>a.input.customer.name=t)},null,512),[[i.nr,a.input.customer.name]])]),(0,l.Wm)("div",J,[N,(0,l.wy)((0,l.Wm)("input",{class:"input is-large",type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>a.input.customer.email=t)},null,512),[[i.nr,a.input.customer.email]])]),(0,l.Wm)("div",A,[K,(0,l.wy)((0,l.Wm)("input",{class:"input is-large",type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>a.input.customer.prefecture=t)},null,512),[[i.nr,a.input.customer.prefecture]])]),(0,l.Wm)("div",R,[Y,(0,l.wy)((0,l.Wm)("input",{class:"input is-large",type:"text","onUpdate:modelValue":e[4]||(e[4]=t=>a.input.customer.addres=t)},null,512),[[i.nr,a.input.customer.addres]])]),(0,l.Wm)("div",F,[B,(0,l.wy)((0,l.Wm)("input",{class:"input is-large",type:"text","onUpdate:modelValue":e[5]||(e[5]=t=>a.input.item.item_name=t)},null,512),[[i.nr,a.input.item.item_name]])]),(0,l.Wm)("div",G,[Q,(0,l.wy)((0,l.Wm)("select",{class:"select is-medium","onUpdate:modelValue":e[6]||(e[6]=t=>a.input.item.item_type=t),required:""},[X],512),[[i.bM,a.input.item.item_type]])]),(0,l.Wm)("div",Z,[tt,(0,l.wy)((0,l.Wm)("input",{class:"input is-large",type:"text","onUpdate:modelValue":e[7]||(e[7]=t=>a.input.item.item_price=t)},null,512),[[i.nr,a.input.item.item_price]])]),(0,l.Wm)("div",et,[nt,(0,l.wy)((0,l.Wm)("select",{class:"select is-medium","onUpdate:modelValue":e[8]||(e[8]=t=>a.input.item.status=t)},[it],512),[[i.bM,a.input.item.status]])]),(0,l.Wm)("div",lt,[at,(0,l.wy)((0,l.Wm)("input",{class:"input is-large",type:"text","onUpdate:modelValue":e[9]||(e[9]=t=>a.input.item.item_detail=t)},null,512),[[i.nr,a.input.item.item_detail]])]),(0,l.Wm)("div",ot,[ut,(0,l.wy)((0,l.Wm)("input",{class:"input is-large",type:"text","onUpdate:modelValue":e[10]||(e[10]=t=>a.input.item.item_comment=t)},null,512),[[i.nr,a.input.item.item_comment]])]),(0,l.Wm)("div",st,[mt,(0,l.Wm)("div",rt,[((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(a.images.value,((t,e)=>((0,l.wg)(),(0,l.j4)("div",{class:"card-item",key:e},[(0,l.Wm)("img",{src:t.image_data},null,8,["src"]),(0,l.Wm)("p",null,(0,y.zw)(t.filename),1)])))),128))])]),(0,l.Wm)("button",{type:"button",class:"button is-primary is-rounded",onClick:e[11]||(e[11]=(...t)=>a.backHistory&&a.backHistory(...t))},"戻る"),pt],32)])}var dt={name:"Detail",setup(){const{getItems:t,updateInput:e,getItem:n,page:i}=(0,l.f3)("itemStore"),a=(0,c.qj)({customer:{id:"",name:"",email:"",prefecture:"",addres:""},item:{id:"",item_name:"",item_type:"",item_price:"",item_detail:"",item_comment:"",status:""}}),o=(0,c.qj)([]);(0,l.wF)((async()=>{const t=(0,h.yj)(),e=t.params.id,i=await n(e),{customer:l,item:u}=i;o.value=i.images,a.customer={id:l.id,name:l.name,email:l.email,prefecture:l.prefecture,addres:l.addres},a.item={id:u.id,item_name:u.item_name,item_type:u.item_type,item_price:u.item_price,item_detail:u.item_detail,item_comment:u.item_comment,status:u.status}}));const u=(0,h.tv)(),s=()=>{t(i.value),u.push("/")},m=async()=>{confirm("更新します。よろしいですか？")&&(await e(a),await t(i.value),u.push("/"))};return{images:o,input:a,backHistory:s,sendInput:m}}};dt.render=ct;var vt=dt;const Wt=[{path:"/",name:"admintop",component:q},{path:"/detail/:id",name:"itemdetail",component:vt}],ht=(0,h.p7)({history:(0,h.r5)(),routes:Wt});var yt=ht;const ft=(0,i.ri)(W);ft.use(yt),ft.mount("#app")}},e={};function n(i){var l=e[i];if(void 0!==l)return l.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,n),a.exports}n.m=t,function(){var t=[];n.O=function(e,i,l,a){if(!i){var o=1/0;for(r=0;r<t.length;r++){i=t[r][0],l=t[r][1],a=t[r][2];for(var u=!0,s=0;s<i.length;s++)(!1&a||o>=a)&&Object.keys(n.O).every((function(t){return n.O[t](i[s])}))?i.splice(s--,1):(u=!1,a<o&&(o=a));if(u){t.splice(r--,1);var m=l();void 0!==m&&(e=m)}}return e}a=a||0;for(var r=t.length;r>0&&t[r-1][2]>a;r--)t[r]=t[r-1];t[r]=[i,l,a]}}(),function(){n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,i){var l,a,o=i[0],u=i[1],s=i[2],m=0;for(l in u)n.o(u,l)&&(n.m[l]=u[l]);if(s)var r=s(n);for(e&&e(i);m<o.length;m++)a=o[m],n.o(t,a)&&t[a]&&t[a][0](),t[o[m]]=0;return n.O(r)},i=self["webpackChunkadmin_vue"]=self["webpackChunkadmin_vue"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(336)}));i=n.O(i)})();
//# sourceMappingURL=app.b97bf8dd.js.map